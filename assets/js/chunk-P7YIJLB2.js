import{Of as $,Pf as y,Qf as M,Rf as b,S as m,Sf as h,Tf as C,Uf as d,_ as G,de as w,ee as F,fb as g,ge as L,ja as S,jg as P}from"./chunk-MRBFGLAA.js";import{d as A,i as v,ka as l,la as c,ma as a,z as H}from"./chunk-EPGEAFUN.js";import{a as n}from"./chunk-3XV6NNL6.js";var i=n(t=>new Date(t.startedAt).getTime()+t.duration*1e3,"endOfGame"),u=n(t=>!!t.startedAt&&i(t)<=Date.now(),"isGameFinished"),D=n(t=>t.filter(u),"getFinishedGames"),I=n(t=>t.every(u),"areAllGamesFinished"),E=n(t=>t.games.length!==0&&I(t.games),"isSessionFinished"),J=n(({games:t})=>t.length-1===t.filter(e=>e.startedAt).length,"isLastSessionGame"),Q=n(t=>!!t.startedAt&&!u(t),"isGameInProgress"),_=n(t=>!!t.startedAt,"isGameStarted"),B=n(t=>t.filter(_),"getStartedGames"),U=n(t=>!!t.startedAt,"isSessionStarted");var V=n(({games:t},e)=>t.map(s=>s.id===e?i({...s,startedAt:Date.now()}):i(s)).reduce((s,o)=>s>o?s:o),"endOfSession"),X=n(t=>t.startedAt?(Date.now()-new Date(t.startedAt).getTime())/1e3*100/t.duration:0,"elapsedTime"),O=n(t=>t.map(e=>({startedAt:new Date(e.startedAt).getTime(),endedAt:i(e)})).reduce((e,s)=>({startedAt:e.startedAt<s.startedAt?e.startedAt:s.startedAt,endedAt:e.endedAt>s.endedAt?e.endedAt:s.endedAt}),{}),"getSessionDates"),R=n(t=>{let e=O(t);return e.endedAt-e.startedAt},"getSubmissionDelay"),j=n(t=>B(t).sort((e,s)=>new Date(e.startedAt).getTime()-new Date(s.startedAt).getTime()).at(-1),"getLastStartedGame"),K=n(t=>D(t).sort((e,s)=>i(e)-i(s)).at(-1),"getLastFinishedGame"),Z=n(t=>{let e=j(t),s=K(t),o=S(new Date(e.startedAt).getTime()),r=s&&S(i(s));return s?new Date(e.startedAt).getTime()>i(s)?`${m(e.name)} started at ${o}`:`${m(s.name)} finished at ${r}`:`${m(e.name)} started at ${o}`},"getLastActivity"),tt=n((t,{resultsToSend:e})=>e.filter(({id:s})=>!t.results.some(o=>o.level===s)).map((s,o)=>({attempts:s.attempts,sessionGameId:t.id,level:s.id})),"prepareSessionGames");H();var N=n(({dataKey:t,data:e})=>t==="attempts"&&`${e}`,"LevelData"),W=n(({results:t,game:e,forCandidate:s})=>{let o=L(e.name,e.points,t);return a(l,{teal:!0,fMono:!0,light:!0,w100p:!0,lh4:!0,children:["Achieved level"," ",a(c,{name:`${e.name}-final-level`,children:t.length}),!s&&a(l,{children:[Math.round(o.points),"/",e.points," \u2605 -"," ",o.percent?.toFixed(1)," %"]})]})},"GameGlobalScore"),Y=n(({level:t,index:e,gameId:s,forCandidate:o})=>{let r=e===0,x=`${Math.round(w(s,t.attempts,e+1))} / ${Math.round(F(e,s))} \u2605`;return a(b,{children:[a(d,{fSans:!0,fs6:!0,light:!0,pt3:r,children:e+1}),!o&&a(d,{textCenter_xs:!0,fSans:!0,fs6:!0,light:!0,pt3:r,children:x}),a(d,{fSans:!0,textRight_xs:!0,fs6:!0,light:!0,pt3:r,name:`${s}-data-${e+1}`,children:Object.entries(t).map(([p,f])=>a(N,{dataKey:p,data:f},p))})]})},"GameLevelDetail"),q=n(({children:t,name:e,forCandidate:s})=>{let[o,r]=v(!1);return o?a(A,{children:[a(g,{mv3:!0,onClick:()=>r(!1),children:"- mask details"}),a(y,{ba0:!0,cellSpacing:"0",cellPadding:"0",w50p:!0,w100p_s:!0,mt3:!0,mb6:!0,children:[a(M,{children:a(b,{textMinimal:!0,children:[a(h,{fMono:!0,fs7:!0,light:!0,bb:!0,pb2:!0,textLeft:!0,children:"Level"}),!s&&a(h,{fMono:!0,fs7:!0,textCenter_xs:!0,light:!0,bb:!0,pb2:!0,textLeft:!0,children:"Stars"}),a(h,{fMono:!0,fs7:!0,textRight_xs:!0,light:!0,bb:!0,pb2:!0,textLeft:!0,children:"Attempts"})]})}),a(C,{lh5:!0,children:t})]})]}):a(g,{mv3:!0,onClick:()=>r(!0),name:`${e}-show-details`,children:"+ show details"})},"GameLevelsDetail"),lt=n(({results:t,game:e,forCandidate:s})=>a(l,{mb3:!0,children:[a(W,{results:t,game:e,forCandidate:s}),a(q,{name:e.name,forCandidate:s,children:t&&t.length!==0?t.map((o,r)=>a(Y,{level:o,index:r,gameId:e.name,forCandidate:s},r)):a(b,{children:a(d,{colSpan:"3",textCenter:!0,children:"Level 1 is not passed."})})})]}),"GameResults"),dt=n(({score:t,gradual:e=!0})=>a(l,{w2px:!0,h2px:!0,br50p:!0,inlineBlock:!0,mr2:!0,bgRed:e?t<20:t<100,bgOrange:e&&t>=20&&t<40,bgYellow:e&&t>=40&&t<60,bgGreen:e&&t>=60&&t<80,bgTeal:e?t>=80&&t<=100:t===100,bgCyan:t>100}),"ScoreDot"),k=n(({width:t,text:e,steps:s})=>a(A,{children:[a($,{width:t*.8,steps:s}),a(c,{fMono:!0,block:!0,textCenter:!0,mt5:!0,children:e})]}),"ProgressionItem"),pt=n(({games:t=[],width:e})=>{if(!t.some(T=>T.startedAt))return a(k,{width:e,steps:[{value:0},{value:1,status:"disabled",hidden:!0}],text:"Not started"});let o=D(t),r=o.length===t.length,x=G(R(t)/1e3),p=r?a(c,{children:["Submitted after",a("br",{}),x]}):"In progress",f=r?[{value:0},{value:1,major:!0,status:"active"}]:[{value:0,hidden:!0},{value:o.length*100/t.length/100},{value:1,status:"disabled",hidden:!0}];return a(k,{width:e,steps:f,text:p})},"ProgressionStat");export{i as a,u as b,D as c,E as d,J as e,Q as f,U as g,V as h,X as i,K as j,Z as k,tt as l,lt as m,dt as n,pt as o};
