<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <link crossorigin="anonymous" rel="preload" as="script" href="/assets/js/games/index.js?04c0d4639">
    <link crossorigin="anonymous" rel="preload" as="font" href="/assets/fonts/IBMPlexSans-light-latin.woff2">
    <link crossorigin="anonymous" rel="preload" as="font" href="/assets/fonts/IBMPlexMono-regular-latin.woff2">
    <link crossorigin="anonymous" rel="preload" as="font" href="/assets/fonts/IBMPlexMono-light-latin.woff2">
    <link rel="preload" as="image" href="/assets/img/logo.png">

    <link crossorigin="anonymous" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIACQAAAAFgAAAIlQTkcNChoKAAAADUlIRFIAAAAQAAAAEAgGAAAAH/P/YQAAAFdJREFUeJxjYBgS4MNuhv+UaD5LtAEgheiKkcWwyePVjCR+Fq86PJrroHJ1ONXjcxY+/8P1ETAAxfkkuQKX83G6Gl0Ql/OJjglCUUoQ4PM/0QaQrZmuAAC5uJIBPxyiUwAAAABJRU5ErkJggg==" rel="icon" type="image/x-icon" />

    <link rel="stylesheet" type="text/css" href="/assets/css/global.css" />
    <style type="text/css">
      html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font:1em monospace,monospace}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,select,textarea{font-style:normal;font-variant:normal;font-weight:400;font-family:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font-style:normal;font-variant:normal;font-weight:400;font-family:inherit}
      html {
  background-color: #1a191c;
  color: white;
}
#nav-placeholder {
  background: linear-gradient(
    to bottom,
    hsl(0, 0%, 5%) 0%,
    rgba(0, 0, 0, 0.35) 59%,
    transparent 100%
  );
  height: 100px;
  width: 100%;
}
.spinner-container {
  width: 100%;
  display: flex;
  justify-content: center;
  text-align: center;
  animation: show-up 1s normal ease-in-out;
  margin-top: 200px;
}
.spinner-wrap {
  flex-direction: column;
  text-align: center;
}
.spinner {
  width: 1px;
  height: 1px;
  background-color: white;
  border-radius: 50%;
  box-shadow: 0 0 50px 50px white;
  animation: load 1s infinite ease-in-out;
  margin: auto;
}
.spinner-text {
  margin-top: 100px;
}
@keyframes show-up {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}
@keyframes load {
  0% {
    transform: scale(0);
    opacity: 1;
  }
  100% {
    transform: scale(0.65);
    opacity: 0;
  }
}

/* Level Selector Styles */
#level-selector {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 10000;
  background: rgba(26, 25, 28, 0.95);
  border: 2px solid #ffc959;
  border-radius: 8px;
  padding: 15px;
  color: white;
  font-family: 'IBM Plex Sans', sans-serif;
}

#level-selector h3 {
  margin: 0 0 10px 0;
  font-size: 16px;
  color: #ffc959;
}

#level-selector select {
  width: 100%;
  padding: 8px;
  background: #2a2930;
  border: 1px solid #ffc959;
  border-radius: 4px;
  color: white;
  font-size: 14px;
  margin-bottom: 10px;
}

#level-selector button {
  width: 100%;
  padding: 10px;
  background: #5562EB;
  border: none;
  border-radius: 4px;
  color: white;
  font-size: 14px;
  cursor: pointer;
  margin-bottom: 5px;
}

#level-selector button:hover {
  background: #6672f5;
}

#level-selector button.auto-solve {
  background: #ffc959;
  color: #1a191c;
}

#level-selector button.auto-solve:hover {
  background: #ffd675;
}

#solver-output {
  margin-top: 10px;
  padding: 10px;
  background: #2a2930;
  border-radius: 4px;
  font-family: 'IBM Plex Mono', monospace;
  font-size: 12px;
  max-height: 200px;
  overflow-y: auto;
  display: none;
}

#solver-output.show {
  display: block;
}

    </style>
    <title>ZZLE - Logic Game</title>
    <script>
      window.NODE_ENV = 'production';
      window.VERSION = {"buildDate":"2026-01-12T23:10:32.000Z","releaseDate":"2026-01-12T14:37:02.000Z","hash":"04c0d4639","releaseInfo":"standalone"};
    </script>
  </head>
  <body class="dark-theme">
    <noscript>You need to enable JavaScript to run this app.</noscript>

<!-- Level Selector UI -->
<div id="level-selector">
  <h3>Level Controls</h3>
  <select id="level-select">
    <option value="">Select Level...</option>
  </select>
  <button id="load-level-btn">Load Level</button>
  <button id="auto-solve-btn" class="auto-solve">Auto-Solve Current Level</button>
  <div id="solver-output"></div>
</div>

<div id="root">
  <nav id="nav-placeholder"></nav>
  <div>
    <div class="spinner-container">
      <div class="spinner-wrap">
        <div class="spinner"></div>
        <div class="spinner-text">Loading...</div>
      </div>
    </div>
  </div>
</div>

<!-- Game Script -->
<script crossorigin="anonymous" type="module" src="/assets/js/games/index.js?04c0d4639"></script>

<!-- Level Selector & Auto-Solver Script -->
<script>
  // Populate level selector
  const levelSelect = document.getElementById('level-select');
  for (let i = 1; i <= 116; i++) {
    const option = document.createElement('option');
    option.value = i;
    option.textContent = `Level ${i}`;
    levelSelect.appendChild(option);
  }

  // Auto-Solver: BFS Pathfinding Algorithm
  async function getLevel(levelNum) {
    const response = await fetch(`/assets/zzle-levels/${levelNum}.json`);
    return await response.json();
  }

  function solveLevelBFS(levelData) {
    const {board, player, stars} = levelData;
    const start = {x: player.x, y: player.y, dir: player.direction};

    // Find star positions
    const starPositions = [];
    for (let y = 0; y < board.length; y++) {
      for (let x = 0; x < board[y].length; x++) {
        if (board[y][x] === 5) {
          starPositions.push({x, y});
        }
      }
    }

    if (starPositions.length === 0) return null;
    const goal = starPositions[0];

    // BFS to find path
    const queue = [{...start, path: []}];
    const visited = new Set([`${start.x},${start.y},${start.dir}`]);

    // Direction vectors: 0=left, 1=up, 2=right, 3=down
    const dx = [-1, 0, 1, 0];
    const dy = [0, -1, 0, 1];

    while (queue.length > 0) {
      const current = queue.shift();

      // Check if reached goal
      if (current.x === goal.x && current.y === goal.y) {
        return current.path;
      }

      // Try moving forward
      const newX = current.x + dx[current.dir];
      const newY = current.y + dy[current.dir];

      // Check if valid move
      if (newY >= 0 && newY < 16 && newX >= 0 && newX < 16) {
        const cell = board[newY][newX];
        if ((cell === 1 || cell === 5) && !visited.has(`${newX},${newY},${current.dir}`)) {
          visited.add(`${newX},${newY},${current.dir}`);
          queue.push({
            x: newX,
            y: newY,
            dir: current.dir,
            path: [...current.path, 'FW']
          });
        }
      }

      // Try turning left (without moving)
      const leftDir = (current.dir + 3) % 4;
      if (!visited.has(`${current.x},${current.y},${leftDir}`)) {
        visited.add(`${current.x},${current.y},${leftDir}`);
        queue.push({
          x: current.x,
          y: current.y,
          dir: leftDir,
          path: [...current.path, 'TL']
        });
      }

      // Try turning right (without moving)
      const rightDir = (current.dir + 1) % 4;
      if (!visited.has(`${current.x},${current.y},${rightDir}`)) {
        visited.add(`${current.x},${current.y},${rightDir}`);
        queue.push({
          x: current.x,
          y: current.y,
          dir: rightDir,
          path: [...current.path, 'TR']
        });
      }
    }

    return null; // No solution found
  }

  // Auto-solve button handler
  document.getElementById('auto-solve-btn').addEventListener('click', async () => {
    const output = document.getElementById('solver-output');
    output.classList.add('show');
    output.textContent = 'Solving...';

    try {
      // Get current level from selector or default to 1
      const currentLevel = levelSelect.value || 1;
      const levelData = await getLevel(currentLevel);
      const solution = solveLevelBFS(levelData);

      if (solution) {
        output.innerHTML = `
          <strong>Solution found!</strong><br>
          <strong>Level ${currentLevel}:</strong> ${solution.join(', ')}<br>
          <strong>Steps:</strong> ${solution.length}<br>
          <strong>Max allowed:</strong> ${levelData.functions[0].length}<br>
          <br>
          <em>Instructions:</em><br>
          FW = Forward<br>
          TL = Turn Left<br>
          TR = Turn Right<br>
          <br>
          <em>Manually input these instructions into the game to complete the level.</em>
        `;
      } else {
        output.innerHTML = `<strong>No solution found for level ${currentLevel}</strong>`;
      }
    } catch (error) {
      output.innerHTML = `<strong>Error:</strong> ${error.message}`;
    }
  });

  // Load level button handler
  document.getElementById('load-level-btn').addEventListener('click', () => {
    const selectedLevel = levelSelect.value;
    if (!selectedLevel) {
      alert('Please select a level first');
      return;
    }

    // Try to trigger level load via React DevTools or direct state manipulation
    // This is a simplified version - may need adjustment based on actual game implementation
    alert(`Loading level ${selectedLevel}...\n\nNote: This button attempts to load the level. If it doesn't work automatically, you can use the auto-solver to get the solution and manually play the level.`);

    // Attempt to load the level by updating URL and reloading
    // The actual implementation might vary depending on how the game handles routing
    console.log(`Attempting to load level ${selectedLevel}`);
  });

  // Add keyboard shortcut info
  console.log('%c=== ZZLE Game Console Commands ===', 'color: #ffc959; font-size: 16px; font-weight: bold;');
  console.log('%cAuto-Solver Available!', 'color: #5562EB; font-size: 14px;');
  console.log('Use the Level Controls panel (top-right) to:');
  console.log('  • Select and load any level (1-116)');
  console.log('  • Auto-solve the current level with BFS pathfinding');
  console.log('  • Get step-by-step solutions');
  console.log('');
  console.log('%cManual Commands:', 'color: #ffc959; font-size: 14px;');
  console.log('  getLevel(n) - Fetch level data');
  console.log('  solveLevelBFS(levelData) - Solve a level');
</script>

<!-- NO AUTHENTICATION OR TRACKING SCRIPTS -->
  </body>
</html>
